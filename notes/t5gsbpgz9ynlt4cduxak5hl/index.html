<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="icon" href="/dendron-wiki/favicon.ico"/><title>CapitalOne</title><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="description" content="Personal knowledge space"/><meta property="og:title" content="CapitalOne"/><meta property="og:description" content="Personal knowledge space"/><meta property="og:url" content="https://ngocuong0105.github.io/dendron-wiki/notes/t5gsbpgz9ynlt4cduxak5hl/"/><meta property="og:type" content="article"/><meta property="article:published_time" content="7/28/2022"/><meta property="article:modified_time" content="11/17/2022"/><link rel="canonical" href="https://ngocuong0105.github.io/dendron-wiki/notes/t5gsbpgz9ynlt4cduxak5hl/"/><meta name="next-head-count" content="14"/><link rel="preload" href="/dendron-wiki/_next/static/css/73bff7fc08ed1d26.css" as="style"/><link rel="stylesheet" href="/dendron-wiki/_next/static/css/73bff7fc08ed1d26.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/dendron-wiki/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/dendron-wiki/_next/static/chunks/webpack-5a49f804ab2869ab.js" defer=""></script><script src="/dendron-wiki/_next/static/chunks/framework-28c999baf2863c3d.js" defer=""></script><script src="/dendron-wiki/_next/static/chunks/main-2a75a40d33729b12.js" defer=""></script><script src="/dendron-wiki/_next/static/chunks/pages/_app-47f94d7e2ed9c5e2.js" defer=""></script><script src="/dendron-wiki/_next/static/chunks/935-4dee79e80b8641c6.js" defer=""></script><script src="/dendron-wiki/_next/static/chunks/6-50972def09142ee2.js" defer=""></script><script src="/dendron-wiki/_next/static/chunks/pages/notes/%5Bid%5D-78d472fa3b924116.js" defer=""></script><script src="/dendron-wiki/_next/static/AZXonBxzXDJ7mmxS9Br0O/_buildManifest.js" defer=""></script><script src="/dendron-wiki/_next/static/AZXonBxzXDJ7mmxS9Br0O/_ssgManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><section class="ant-layout" style="width:100%;min-height:100%"><header class="ant-layout-header" style="position:fixed;isolation:isolate;z-index:1;width:100%;border-bottom:1px solid #d4dadf;height:64px;padding:0 24px 0 2px"><div class="ant-row ant-row-center" style="max-width:992px;justify-content:space-between;margin:0 auto"><div style="display:flex" class="ant-col ant-col-xs-20 ant-col-sm-4"></div><div class="ant-col gutter-row ant-col-xs-0 ant-col-sm-20 ant-col-md-20 ant-col-lg-19"><div class="ant-select ant-select-lg ant-select-auto-complete ant-select-single ant-select-allow-clear ant-select-show-search" style="width:100%"><div class="ant-select-selector"><span class="ant-select-selection-search"><input type="search" autoComplete="off" class="ant-select-selection-search-input" role="combobox" aria-haspopup="listbox" aria-owns="undefined_list" aria-autocomplete="list" aria-controls="undefined_list" aria-activedescendant="undefined_list_0" value=""/></span><span class="ant-select-selection-placeholder">For full text search please use the &#x27;?&#x27; prefix. e.g. ? Onboarding</span></div></div></div><div style="display:none;align-items:center;justify-content:center" class="ant-col ant-col-xs-4 ant-col-sm-4 ant-col-md-0 ant-col-lg-0"><span role="img" aria-label="menu" style="font-size:24px" tabindex="-1" class="anticon anticon-menu"><svg viewBox="64 64 896 896" focusable="false" data-icon="menu" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"></path></svg></span></div></div></header><section class="ant-layout" style="margin-top:64px;display:flex;flex-direction:row"><div class="site-layout-sidebar" style="flex:0 0 auto;width:calc(max((100% - 992px) / 2, 0px) + 200px);min-width:200px;padding-left:calc((100% - 992px) / 2)"><aside class="ant-layout-sider ant-layout-sider-dark" style="position:fixed;overflow:auto;height:calc(100vh - 64px);background-color:transparent;flex:0 0 200px;max-width:200px;min-width:200px;width:200px"><div class="ant-layout-sider-children"></div></aside></div><main class="ant-layout-content side-layout-main" style="max-width:1200px;min-width:0;display:block"><div style="padding:0 24px"><div class="main-content" role="main"><div class="ant-row"><div class="ant-col ant-col-24"><div class="ant-row" style="margin-left:-10px;margin-right:-10px"><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-24 ant-col-md-18"><div><h1 id="capitalone">CapitalOne<a aria-hidden="true" class="anchor-heading icon-link" href="#capitalone"></a></h1>
<h1 id="merging-feature">Merging Feature<a aria-hidden="true" class="anchor-heading icon-link" href="#merging-feature"></a></h1>
<p>1.1 Summary points on merging feature:</p>
<ul>
<li>Given cashflows for diifferent products - aggregate them to get a summary report
e.g NPV -> weighted mean on accounts
e.g Discount rate -> harmonic mean
<ul>
<li>These reports are used in the decision making to decide which programs are
worth  pursuing and which not </li>
<li>Monitoring the risk the bank is taking when giving credits</li>
</ul>
</li>
<li>It follows ETL process: extract data from parquet files; transform data by
combination functions</li>
<li>Load data in OneFlow workflow to produce automatic excel report</li>
</ul>
<p>1.2  We heavylift the database (parquet files), the dispatching manually in python. Not like Django Flask frameworks where everything is checked this is getting the correct request, is it from the write url etc. </p>
<ul>
<li>Created additive dispatching for computing 200+ fields each using different type of  combining function( yaml file combination  functions mapping field -> function) (name mapping algo tailor to Principles of Computer System Design Book) From book notes: Frequent name-mapping algorithms:</li>
<li>Table lookup</li>
<li>Recursive lookup</li>
<li>Multiple lookup</li>
</ul>
<p>1.3 Main benefit is that they are additive no need for refactoring endless if else statements. When add in another Field or Dunction
Read more about that in SICP Chapter 2 Python version page 52, Type dispatching. In your case the dispatching is the merging function for the different CFS and CRM fieldds
1.4 Challenges: How to handle so many fields=business metrics -> scaled using static
dispatch mapping and message passing.</p>
<ul>
<li>Unit tests did not prove enough covarege for the combination functions</li>
<li>Integration tests with realistic data showed a lot of mismatches and errors in our combining functions. Though unit tests tried to capture edge cases etc, realistic data turned out to be much messier than we expected.</li>
<li>Thus for T-C feature we will create the feature and do integration tests in parallel.</li>
</ul>
<h1 id="t-c-feature">T-C feature<a aria-hidden="true" class="anchor-heading icon-link" href="#t-c-feature"></a></h1>
<p>2.1 Given  test and control data sets return reports of the differences between the two</p>
<ul>
<li>Used to test hypothesis , e.g. control data are logtime users test are new clients, see how
they behave</li>
</ul>
<p>2.2 Created  Directory for Dispatiching (imrovement on the previous feature) yaml to paralize   </p>
<p>when new dispatches and messegaes were created across different people
This direcotry of dispatching grouped similar fields = summary statistics/business metrics!
2.3 Introduced test driven developement, before relied only on unit tests, now create integration tests alongside the feature. Reasoning for using it is because OneFlow is a data tool and heavilyt relies on the data. If it is messy, tests fail more easily. Alot of edge cases to mke sure OneFlow does the right computation</p>
<p>Benefits:
reduced debugging effort – when test failures are detected, having smaller units aids in tracking down errors.</p>
<p>2.4 applied Incremental developement:</p>
<ul>
<li>Unit testing : when you test a module in isolation, you can be confident that any bug you find is in that unit – or
maybe in the test cases themselves.
-Regression testing : when you’re adding a new feature to a big system, run the regression test suite as often as
possible. If a test fails, the bug is probably in the code you just changed.</li>
</ul>
<h1 id="performance-improvements">Performance improvements<a aria-hidden="true" class="anchor-heading icon-link" href="#performance-improvements"></a></h1>
<ul>
<li>joblib parralel for program level runs</li>
<li>numba improvements to targeted calculations (math decorator)</li>
</ul>
<h1 id="convocation">Convocation<a aria-hidden="true" class="anchor-heading icon-link" href="#convocation"></a></h1>
<p>Organise Data all hands event for data uk. Fun fair theme with stalls. Increase team effectiveness. Outcome teams. Program increments.</p>
<h1 id="other">Other<a aria-hidden="true" class="anchor-heading icon-link" href="#other"></a></h1>
<ul>
<li>
<p>Data expo <a href="https://drive.google.com/drive/folders/1VT4c2V9zxzlYeKot3dV6I4j-HhLwcE7f">presentation</a> of OneFlow</p>
</li>
<li>
<p>PUG talk, python users group ML <a href="https://drive.google.com/drive/folders/1VT4c2V9zxzlYeKot3dV6I4j-HhLwcE7f">presention</a></p>
<p>Approaches when developing a feature:</p>
</li>
</ul>
<ol>
<li>develop feature + unit tests
then create intergation test</li>
<li>develop feature +unit test + create integration test ( Test-driven development
parallelize inegration test while developing a feature
Not realying only on unit tests only</li>
<li>Github flow vs GitFlow we are moving from one to the other</li>
<li>Docusourus tool for static web pages</li>
<li>.env file lets you customize the individual working environment variables.
Using environment variables  common practice during Development not a healthy
practice to use with Production.
<ul>
<li>in .enf file: add secrets, passwords, FEATURE FLAGS
E.g if sharing codebase with the users we can have our own local .env where the<br>
feature flag is turned on. Hoever in production(the users) do not have this feature
turned on.</li>
</ul>
</li>
</ol>
<ul>
<li>
<p>PM stuff:
Follow Agile principles by using tools such as Jira and Confluence Enforcing the scrum rituals (sprint planning/retrospective, daily huddles, and customer demos). </p>
</li>
<li>
<p>Building system: infrastructure, storage, network protocols</p>
</li>
</ul>
<hr>
<p><strong>Behave</strong> is a python library that enforces behaviour driven developement BDD which is an extension of TDD.</p>
<p>As we all know in TDD we write tests first and then   develop  individual functions in the code</p>
<p>BDD is the same but it acts on the level of features rather than functions.
So in BDD users and developers writetest cases in English so  that non-programmers can understand.
And only then developers start writing code</p>
<p>Involves users/BA-s and non-technical people can participate in the implementation process</p>
<p>Writes tests using normal language - allows users to write tests</p>
<p>FEATURES files are written by users</p>
<p>Advantages
Allow users to be in the developement process + instead of writing feature spec and requirements, they write test directly. </p>
<p>Disadvantage is that it might take more BA-s time and given that tehy are already quite busy it might not be optimal</p>
<p>If we use behave it will probably worth it only for some integration tests
and do not use it for all unit tests which</p>
<hr>
<p>Recoveries liquidation array = money we recover when our clients go in default</p>
<p>I compute RLA for each account using only matrix operations avoiding loops.  After making 100 runs each with 3k account the speed up is 46\%. <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>N</mi><mn>3</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(N^3)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span> problem I did using one loop and for each iteration of the loop I use matrix operations.</p>
<pre class="language-python"><code class="language-python">liquid_array_per_id <span class="token operator">=</span>
            np<span class="token punctuation">.</span>outer<span class="token punctuation">(</span>co_pop1<span class="token punctuation">,</span> padded_pop1_non_debt_sale<span class="token punctuation">)</span>
            <span class="token operator">+</span> np<span class="token punctuation">.</span>outer<span class="token punctuation">(</span>co_pop2<span class="token punctuation">,</span> padded_pop2_non_debt_sale<span class="token punctuation">)</span>
            <span class="token operator">+</span> np<span class="token punctuation">.</span>outer<span class="token punctuation">(</span>co_pop3<span class="token punctuation">,</span> padded_pop3_non_debt_sale<span class="token punctuation">)</span>
            <span class="token operator">+</span> window_multiply<span class="token punctuation">(</span>debt_sale_prop <span class="token operator">*</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span>co_pop1<span class="token punctuation">)</span><span class="token punctuation">,</span>sale_price<span class="token punctuation">)</span>
</code></pre>
<h4 id="time-complexity">Time complexity<a aria-hidden="true" class="anchor-heading icon-link" href="#time-complexity"></a></h4>
<p>Assume we have <code>N</code> accounts, <code>S</code> statements and <code>CO</code> statements since charge off. The output contains for each account (<code>N</code> in total) and each statement (<code>S</code> in total) a liquidation array of size (<code>CO</code>). Hence the output is with dimension <code>N x S x CO</code> and just writing the output would require <code>O(N x S x CO)</code> runtime (i.e. that is the minimum runtime required).</p>
<p>Our RLA computation as we saw above calls two main functions which have non-constant run time - <code>np.outer(co_pop1, padded_pop1_non_debt_sale)</code> and <code>window_multiply(debt_sale_prop * np.array(co_pop1), sale_price)</code></p>
<p><code>co_pop1</code> is with dimension <code>S</code> and <code>padded_pop1_non_debt_sale</code> is with dimension <code>CO</code>,  hence  <code>np.outer(co_pop1, padded_pop1_non_debt_sale)</code> costs <code>O(S x CO)</code>.</p>
<p><code>debt_sale_prop</code> is with dimension <code>CO</code> and hence <code>window_multiply(debt_sale_prop * np.array(co_pop1), sale_price)</code> costs <code>O(S x CO)</code></p>
<p>Since we call these two functions <strong>for each account</strong>,  the total runtime is <code>O(N x S x CO)</code> which is the minimum achievable.
Thus, in terms of orders of growth, this is the fastest possible computation. Note the old RLA version was also <code>O(N x S x CO)</code>  but had a very large constant factor because of using multiple nested for loops.</p>
<h1 id="key-words">Key words<a aria-hidden="true" class="anchor-heading icon-link" href="#key-words"></a></h1>
<p>numba, jit decorator, dask, docosaurous, Agile, behave driven developement, cash flows, valuations, </p></div></div><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-0 ant-col-md-6"><div><div class=""><div class="ant-anchor-wrapper dendron-toc" style="max-height:calc(100vh - 64px);z-index:1"><div class="ant-anchor"><div class="ant-anchor-ink"><span class="ant-anchor-ink-ball"></span></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#merging-feature" title="Merging Feature">Merging Feature</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#t-c-feature" title="T-C feature">T-C feature</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#performance-improvements" title="Performance improvements">Performance improvements</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#convocation" title="Convocation">Convocation</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#other" title="Other">Other</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#time-complexity" title="Time complexity">Time complexity</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#key-words" title="Key words">Key words</a></div></div></div></div></div></div></div></div></div></div></div><div class="ant-divider ant-divider-horizontal" role="separator"></div><footer class="ant-layout-footer" style="padding:0 24px 24px"></footer></main></section></section></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"note":{"id":"t5gsbpgz9ynlt4cduxak5hl","title":"CapitalOne","desc":"","updated":1668703641080,"created":1658990504488,"custom":{},"fname":"work.CapitalOne","type":"note","vault":{"fsPath":"vault"},"contentHash":"ba3f246ddd9769e73030ed2c3f2f5a95","links":[],"anchors":{"merging-feature":{"type":"header","text":"Merging Feature","value":"merging-feature","line":8,"column":0,"depth":1},"t-c-feature":{"type":"header","text":"T-C feature","value":"t-c-feature","line":34,"column":0,"depth":1},"performance-improvements":{"type":"header","text":"Performance improvements","value":"performance-improvements","line":54,"column":0,"depth":1},"convocation":{"type":"header","text":"Convocation","value":"convocation","line":60,"column":0,"depth":1},"other":{"type":"header","text":"Other","value":"other","line":65,"column":0,"depth":1},"time-complexity":{"type":"header","text":"Time complexity","value":"time-complexity","line":127,"column":0,"depth":4},"key-words":{"type":"header","text":"Key words","value":"key-words","line":141,"column":0,"depth":1}},"children":[],"parent":"2av385tcj2cbumxprsauff3","data":{}},"body":"\u003ch1 id=\"capitalone\"\u003eCapitalOne\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#capitalone\"\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003ch1 id=\"merging-feature\"\u003eMerging Feature\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#merging-feature\"\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003cp\u003e1.1 Summary points on merging feature:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eGiven cashflows for diifferent products - aggregate them to get a summary report\ne.g NPV -\u003e weighted mean on accounts\ne.g Discount rate -\u003e harmonic mean\n\u003cul\u003e\n\u003cli\u003eThese reports are used in the decision making to decide which programs are\nworth  pursuing and which not \u003c/li\u003e\n\u003cli\u003eMonitoring the risk the bank is taking when giving credits\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eIt follows ETL process: extract data from parquet files; transform data by\ncombination functions\u003c/li\u003e\n\u003cli\u003eLoad data in OneFlow workflow to produce automatic excel report\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e1.2  We heavylift the database (parquet files), the dispatching manually in python. Not like Django Flask frameworks where everything is checked this is getting the correct request, is it from the write url etc. \u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eCreated additive dispatching for computing 200+ fields each using different type of  combining function( yaml file combination  functions mapping field -\u003e function) (name mapping algo tailor to Principles of Computer System Design Book) From book notes: Frequent name-mapping algorithms:\u003c/li\u003e\n\u003cli\u003eTable lookup\u003c/li\u003e\n\u003cli\u003eRecursive lookup\u003c/li\u003e\n\u003cli\u003eMultiple lookup\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e1.3 Main benefit is that they are additive no need for refactoring endless if else statements. When add in another Field or Dunction\nRead more about that in SICP Chapter 2 Python version page 52, Type dispatching. In your case the dispatching is the merging function for the different CFS and CRM fieldds\n1.4 Challenges: How to handle so many fields=business metrics -\u003e scaled using static\ndispatch mapping and message passing.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eUnit tests did not prove enough covarege for the combination functions\u003c/li\u003e\n\u003cli\u003eIntegration tests with realistic data showed a lot of mismatches and errors in our combining functions. Though unit tests tried to capture edge cases etc, realistic data turned out to be much messier than we expected.\u003c/li\u003e\n\u003cli\u003eThus for T-C feature we will create the feature and do integration tests in parallel.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1 id=\"t-c-feature\"\u003eT-C feature\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#t-c-feature\"\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003cp\u003e2.1 Given  test and control data sets return reports of the differences between the two\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eUsed to test hypothesis , e.g. control data are logtime users test are new clients, see how\nthey behave\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e2.2 Created  Directory for Dispatiching (imrovement on the previous feature) yaml to paralize   \u003c/p\u003e\n\u003cp\u003ewhen new dispatches and messegaes were created across different people\nThis direcotry of dispatching grouped similar fields = summary statistics/business metrics!\n2.3 Introduced test driven developement, before relied only on unit tests, now create integration tests alongside the feature. Reasoning for using it is because OneFlow is a data tool and heavilyt relies on the data. If it is messy, tests fail more easily. Alot of edge cases to mke sure OneFlow does the right computation\u003c/p\u003e\n\u003cp\u003eBenefits:\nreduced debugging effort – when test failures are detected, having smaller units aids in tracking down errors.\u003c/p\u003e\n\u003cp\u003e2.4 applied Incremental developement:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eUnit testing : when you test a module in isolation, you can be confident that any bug you find is in that unit – or\nmaybe in the test cases themselves.\n-Regression testing : when you’re adding a new feature to a big system, run the regression test suite as often as\npossible. If a test fails, the bug is probably in the code you just changed.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1 id=\"performance-improvements\"\u003ePerformance improvements\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#performance-improvements\"\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003ejoblib parralel for program level runs\u003c/li\u003e\n\u003cli\u003enumba improvements to targeted calculations (math decorator)\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1 id=\"convocation\"\u003eConvocation\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#convocation\"\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003cp\u003eOrganise Data all hands event for data uk. Fun fair theme with stalls. Increase team effectiveness. Outcome teams. Program increments.\u003c/p\u003e\n\u003ch1 id=\"other\"\u003eOther\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#other\"\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eData expo \u003ca href=\"https://drive.google.com/drive/folders/1VT4c2V9zxzlYeKot3dV6I4j-HhLwcE7f\"\u003epresentation\u003c/a\u003e of OneFlow\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003ePUG talk, python users group ML \u003ca href=\"https://drive.google.com/drive/folders/1VT4c2V9zxzlYeKot3dV6I4j-HhLwcE7f\"\u003epresention\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eApproaches when developing a feature:\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003col\u003e\n\u003cli\u003edevelop feature + unit tests\nthen create intergation test\u003c/li\u003e\n\u003cli\u003edevelop feature +unit test + create integration test ( Test-driven development\nparallelize inegration test while developing a feature\nNot realying only on unit tests only\u003c/li\u003e\n\u003cli\u003eGithub flow vs GitFlow we are moving from one to the other\u003c/li\u003e\n\u003cli\u003eDocusourus tool for static web pages\u003c/li\u003e\n\u003cli\u003e.env file lets you customize the individual working environment variables.\nUsing environment variables  common practice during Development not a healthy\npractice to use with Production.\n\u003cul\u003e\n\u003cli\u003ein .enf file: add secrets, passwords, FEATURE FLAGS\nE.g if sharing codebase with the users we can have our own local .env where the\u003cbr\u003e\nfeature flag is turned on. Hoever in production(the users) do not have this feature\nturned on.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003ePM stuff:\nFollow Agile principles by using tools such as Jira and Confluence Enforcing the scrum rituals (sprint planning/retrospective, daily huddles, and customer demos). \u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eBuilding system: infrastructure, storage, network protocols\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003cp\u003e\u003cstrong\u003eBehave\u003c/strong\u003e is a python library that enforces behaviour driven developement BDD which is an extension of TDD.\u003c/p\u003e\n\u003cp\u003eAs we all know in TDD we write tests first and then   develop  individual functions in the code\u003c/p\u003e\n\u003cp\u003eBDD is the same but it acts on the level of features rather than functions.\nSo in BDD users and developers writetest cases in English so  that non-programmers can understand.\nAnd only then developers start writing code\u003c/p\u003e\n\u003cp\u003eInvolves users/BA-s and non-technical people can participate in the implementation process\u003c/p\u003e\n\u003cp\u003eWrites tests using normal language - allows users to write tests\u003c/p\u003e\n\u003cp\u003eFEATURES files are written by users\u003c/p\u003e\n\u003cp\u003eAdvantages\nAllow users to be in the developement process + instead of writing feature spec and requirements, they write test directly. \u003c/p\u003e\n\u003cp\u003eDisadvantage is that it might take more BA-s time and given that tehy are already quite busy it might not be optimal\u003c/p\u003e\n\u003cp\u003eIf we use behave it will probably worth it only for some integration tests\nand do not use it for all unit tests which\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003eRecoveries liquidation array = money we recover when our clients go in default\u003c/p\u003e\n\u003cp\u003eI compute RLA for each account using only matrix operations avoiding loops.  After making 100 runs each with 3k account the speed up is 46\\%. \u003cspan class=\"math math-inline\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eO\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmsup\u003e\u003cmi\u003eN\u003c/mi\u003e\u003cmn\u003e3\u003c/mn\u003e\u003c/msup\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eO(N^3)\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1.0641em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.02778em;\"\u003eO\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.10903em;\"\u003eN\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.8141em;\"\u003e\u003cspan style=\"top:-3.063em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e3\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e problem I did using one loop and for each iteration of the loop I use matrix operations.\u003c/p\u003e\n\u003cpre class=\"language-python\"\u003e\u003ccode class=\"language-python\"\u003eliquid_array_per_id \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\n            np\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eouter\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eco_pop1\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e padded_pop1_non_debt_sale\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e np\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eouter\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eco_pop2\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e padded_pop2_non_debt_sale\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e np\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eouter\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eco_pop3\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e padded_pop3_non_debt_sale\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e window_multiply\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003edebt_sale_prop \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e np\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003earray\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eco_pop1\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003esale_price\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch4 id=\"time-complexity\"\u003eTime complexity\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#time-complexity\"\u003e\u003c/a\u003e\u003c/h4\u003e\n\u003cp\u003eAssume we have \u003ccode\u003eN\u003c/code\u003e accounts, \u003ccode\u003eS\u003c/code\u003e statements and \u003ccode\u003eCO\u003c/code\u003e statements since charge off. The output contains for each account (\u003ccode\u003eN\u003c/code\u003e in total) and each statement (\u003ccode\u003eS\u003c/code\u003e in total) a liquidation array of size (\u003ccode\u003eCO\u003c/code\u003e). Hence the output is with dimension \u003ccode\u003eN x S x CO\u003c/code\u003e and just writing the output would require \u003ccode\u003eO(N x S x CO)\u003c/code\u003e runtime (i.e. that is the minimum runtime required).\u003c/p\u003e\n\u003cp\u003eOur RLA computation as we saw above calls two main functions which have non-constant run time - \u003ccode\u003enp.outer(co_pop1, padded_pop1_non_debt_sale)\u003c/code\u003e and \u003ccode\u003ewindow_multiply(debt_sale_prop * np.array(co_pop1), sale_price)\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eco_pop1\u003c/code\u003e is with dimension \u003ccode\u003eS\u003c/code\u003e and \u003ccode\u003epadded_pop1_non_debt_sale\u003c/code\u003e is with dimension \u003ccode\u003eCO\u003c/code\u003e,  hence  \u003ccode\u003enp.outer(co_pop1, padded_pop1_non_debt_sale)\u003c/code\u003e costs \u003ccode\u003eO(S x CO)\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003edebt_sale_prop\u003c/code\u003e is with dimension \u003ccode\u003eCO\u003c/code\u003e and hence \u003ccode\u003ewindow_multiply(debt_sale_prop * np.array(co_pop1), sale_price)\u003c/code\u003e costs \u003ccode\u003eO(S x CO)\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eSince we call these two functions \u003cstrong\u003efor each account\u003c/strong\u003e,  the total runtime is \u003ccode\u003eO(N x S x CO)\u003c/code\u003e which is the minimum achievable.\nThus, in terms of orders of growth, this is the fastest possible computation. Note the old RLA version was also \u003ccode\u003eO(N x S x CO)\u003c/code\u003e  but had a very large constant factor because of using multiple nested for loops.\u003c/p\u003e\n\u003ch1 id=\"key-words\"\u003eKey words\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#key-words\"\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003cp\u003enumba, jit decorator, dask, docosaurous, Agile, behave driven developement, cash flows, valuations, \u003c/p\u003e","noteIndex":{"id":"wn8PE1RhG0znK1alrGFYv","title":"Root","desc":"","updated":1763992060664,"created":1631901573363,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":"vault"},"contentHash":"dc095b340c158394d643b84f8585ff0c","links":[],"anchors":{},"children":["dgcsvcwea8scgdegrk9tfni","xig93vo47ou1bkr7s4w1wb2","ro9bbyftsutm88mxw6r16p5","ypia1zmywsklpicmcgrzlz1","w7iitlako61ppm27mym400a","6bx5plramu4hksomqc1n55z","4nki3bedlvs3mnkixj3a07k","9r5ym61dkwap92fvbte1jkq","849u97nrsuyekmr4a1r92ux","2b5bwf46z6v132wu7xghvrp","dygp5h2vzw4mkromwmofynb","7h50s7ga5ziiyblmoctsqmw","pglaolxcge4xfvgoph3je89","uy9u1co5ih1fokind8tg0eq","jc23ggp8iiu92kpnzo721to","f1u2a47guuw70olv36bzf66","c1bs7wsjfbhb0zipaywqv1","2av385tcj2cbumxprsauff3","lw1b4r6ykimvj9208nkgzps"],"parent":null,"data":{},"body":"\nZdr bebce kp ;)\n\nThis is my knowledge base, additionally I keep [daily journal](https://docs.google.com/document/d/1m8Npu0-t8RweyKiHCjLL1PPDYzbebqm3OZDHH8IVsb8/edit?tab=t.rj0kvkrm7zpr)."},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":false,"leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2,"vaultSelectionModeOnCreate":"smart"}},"insertNote":{"initialValue":"templates"},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"randomNote":{},"copyNoteLink":{"aliasMode":"title"},"templateHierarchy":"template"},"workspace":{"vaults":[{"fsPath":"vault"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":true,"maxPreviewsCached":10,"maxNoteLength":204800,"task":{"name":"","dateFormat":"","addBehavior":"childOfCurrent","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link","taskCompleteStatus":["done","x"]},"enableUserTags":true,"enableHashTags":true,"dendronVersion":"0.95.0","enableEditorDecorations":true,"enableFullHierarchyNoteTitle":false,"templateHierarchy":"template"},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false,"enableFrontmatterTags":true,"enableHashesForFMTags":false},"publishing":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"copyAssets":true,"siteHierarchies":["root"],"writeStubs":false,"siteRootDir":"docs","seo":{"title":"Dendron","description":"Personal knowledge space"},"github":{"enableEditLink":true,"editLinkText":"Edit this page on GitHub","editBranch":"main","editViewMode":"tree"},"enableSiteLastModified":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"enableTaskNotes":true,"enablePrettyLinks":true,"searchMode":"lookup","assetsPrefix":"/dendron-wiki","siteUrl":"https://ngocuong0105.github.io","duplicateNoteBehavior":{"action":"useVault","payload":["vault"]},"theme":"light","templateVersion":"0.97.0","ga":{"tracking":"G-W5DRRLQ1N7"},"siteFaviconPath":"favicon.ico","siteIndex":"root"}}},"__N_SSG":true},"page":"/notes/[id]","query":{"id":"t5gsbpgz9ynlt4cduxak5hl"},"buildId":"AZXonBxzXDJ7mmxS9Br0O","assetPrefix":"/dendron-wiki","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>