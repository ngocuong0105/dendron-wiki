<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="icon" href="/dendron-wiki/favicon.ico"/><title>SIG</title><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="description" content="Personal knowledge space"/><meta property="og:title" content="SIG"/><meta property="og:description" content="Personal knowledge space"/><meta property="og:url" content="https://ngocuong0105.github.io/dendron-wiki/notes/vc9t6o8as6s6lqjsp3r286f/"/><meta property="og:type" content="article"/><meta property="article:published_time" content="7/26/2022"/><meta property="article:modified_time" content="10/25/2022"/><link rel="canonical" href="https://ngocuong0105.github.io/dendron-wiki/notes/vc9t6o8as6s6lqjsp3r286f/"/><meta name="next-head-count" content="14"/><link rel="preload" href="/dendron-wiki/_next/static/css/73bff7fc08ed1d26.css" as="style"/><link rel="stylesheet" href="/dendron-wiki/_next/static/css/73bff7fc08ed1d26.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/dendron-wiki/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/dendron-wiki/_next/static/chunks/webpack-5a49f804ab2869ab.js" defer=""></script><script src="/dendron-wiki/_next/static/chunks/framework-28c999baf2863c3d.js" defer=""></script><script src="/dendron-wiki/_next/static/chunks/main-2a75a40d33729b12.js" defer=""></script><script src="/dendron-wiki/_next/static/chunks/pages/_app-47f94d7e2ed9c5e2.js" defer=""></script><script src="/dendron-wiki/_next/static/chunks/935-4dee79e80b8641c6.js" defer=""></script><script src="/dendron-wiki/_next/static/chunks/6-50972def09142ee2.js" defer=""></script><script src="/dendron-wiki/_next/static/chunks/pages/notes/%5Bid%5D-78d472fa3b924116.js" defer=""></script><script src="/dendron-wiki/_next/static/AZXonBxzXDJ7mmxS9Br0O/_buildManifest.js" defer=""></script><script src="/dendron-wiki/_next/static/AZXonBxzXDJ7mmxS9Br0O/_ssgManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><section class="ant-layout" style="width:100%;min-height:100%"><header class="ant-layout-header" style="position:fixed;isolation:isolate;z-index:1;width:100%;border-bottom:1px solid #d4dadf;height:64px;padding:0 24px 0 2px"><div class="ant-row ant-row-center" style="max-width:992px;justify-content:space-between;margin:0 auto"><div style="display:flex" class="ant-col ant-col-xs-20 ant-col-sm-4"></div><div class="ant-col gutter-row ant-col-xs-0 ant-col-sm-20 ant-col-md-20 ant-col-lg-19"><div class="ant-select ant-select-lg ant-select-auto-complete ant-select-single ant-select-allow-clear ant-select-show-search" style="width:100%"><div class="ant-select-selector"><span class="ant-select-selection-search"><input type="search" autoComplete="off" class="ant-select-selection-search-input" role="combobox" aria-haspopup="listbox" aria-owns="undefined_list" aria-autocomplete="list" aria-controls="undefined_list" aria-activedescendant="undefined_list_0" value=""/></span><span class="ant-select-selection-placeholder">For full text search please use the &#x27;?&#x27; prefix. e.g. ? Onboarding</span></div></div></div><div style="display:none;align-items:center;justify-content:center" class="ant-col ant-col-xs-4 ant-col-sm-4 ant-col-md-0 ant-col-lg-0"><span role="img" aria-label="menu" style="font-size:24px" tabindex="-1" class="anticon anticon-menu"><svg viewBox="64 64 896 896" focusable="false" data-icon="menu" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"></path></svg></span></div></div></header><section class="ant-layout" style="margin-top:64px;display:flex;flex-direction:row"><div class="site-layout-sidebar" style="flex:0 0 auto;width:calc(max((100% - 992px) / 2, 0px) + 200px);min-width:200px;padding-left:calc((100% - 992px) / 2)"><aside class="ant-layout-sider ant-layout-sider-dark" style="position:fixed;overflow:auto;height:calc(100vh - 64px);background-color:transparent;flex:0 0 200px;max-width:200px;min-width:200px;width:200px"><div class="ant-layout-sider-children"></div></aside></div><main class="ant-layout-content side-layout-main" style="max-width:1200px;min-width:0;display:block"><div style="padding:0 24px"><div class="main-content" role="main"><div class="ant-row"><div class="ant-col ant-col-24"><div class="ant-row" style="margin-left:-10px;margin-right:-10px"><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-24 ant-col-md-18"><div><h1 id="sig">SIG<a aria-hidden="true" class="anchor-heading icon-link" href="#sig"></a></h1>
<p>I had to determine whether there is an opportunity for a profitable trading strategy for the HSI futures during the closing auction in HKSE. This project was divided in two main parts. First one collecting and clean data form Bloomberg Terminal – stock indication data from the closing auction. Organise it using VBA macros and then transform to pandas ­dataframes. The second stage of the project was the more interesting one which was coming with a trading ideas and backtesting models for trading during the closing auction.</p>
<p>The closing auction is the last event of every trading day and allows market participants to execute at the closing price. During the closing auction we cannot trade stock but we could trade the futures. The goal of the project was to use the information of stock indications during the auction to trade the futures. First I had determine the the fair value for the futures during the closing auction. This was done by calculating the cost of carry for the basket of stocks in the index, also known as the EFP or basis. The second step was to decide what actions to take based on this value and decide when to enter and when to exit trades on the futures market. People trade features for several reasons. They might want to hedge the underlying, in case they want to lock the underlying price from now and do not be susceptivble for its future movements. Another reason is to market make and provide liquidity. Although SIG is a market maker, our reason for trading the futures in this particular project was to speculate and find if there is opportunity for profitable trading strategy.</p>
<p>The approach I took when working on this project was to start with somethng very simple, think carefully about the assumptions I made and test them. In the end I tried 3 different trading strategies, each building on findings from the previous one.
So after computing the fair value of the futures, I had to decide what actions I should take. I could not trade at fair value because I would be just taking risk and market exposure for nothing. That is why I decided to test how many bips of edge I needed to enter a trade. I tested 3 different levels – 10bps, 20bps, 30bps.</p>
<p>The simplest stategy with which I started was just to enter trade in the beginning of the auction if I saw enough edge. If the price of the future was above the fair value with 10,20,30 bps I would sell it. If the price of the future was below fair with 10,20,30 bps I would buy it. As for closing the position I would always close position in the end of the auction as I did not want to be exposed during market non-working hours. This strategy was not very good and retained 1 bps out of the 10 bps that it required to enter a trade. However, while trying this strategy I noticed that it almost always entered trades early in the auction just after the reference period between the 1st and 6th minute.  The reason for that is because during this period there is higher volatility on the stock indications and the bps I required to enter a trade were tight. I realised that in the beginning of the auction there were some market participants who just wanted to trade at the closing price of the stock but not necessarily had any opinion on the futures. For example some big asset managers just wanted to participate in the auction to get the closing price. In order to take this into account I decided that my strategy should have a warm-up period of 10 seconds after the reference period, during which it cannot enter a trade. This way I wanted to avoid the big fluctuations observed in the beginning of the auction.</p>
<p>Seeing that the first strategy which solely used the fair value of the futures did not work I started doubting my confidence in this fair value. That is why my second strategy was the volume strategy. I computed the historical volumes of stock indications during past auctions, and decided that I would trade the futures only once I see enough edge and the volumes were bigger than a certain threshold which was computing based on the historical volumes. This strategy did not improve the expected profits and still retained 1 bps out of 10 requested to enter a trade. However, the Sharpe ratio was improved slightly, meaning the volume strategy had lower variance while making the same amount of money.
Finnally, as it seemed that I could not be confident in the fair value of the futures that I computed from the stock indications, I decided to change slightly the stock indications. Since there were some asset managers and ETF providers which just entered the auction to match the closing price, I decided to clip the data. Stock indications which were in the top 5% were removed because I thought they such stock indications were coming from people who did not have opinion on the futures market and I should not consider them as an input for finding signal. On historical values clipped data strategy retained 5 bps out of 10 bps. So it seemed that there could be some edge there to be made.
Another observations I found was that trading later in the auction would be with less risky as the coputed EFP would converge to the fair value of the futures, but in order to enter trades I had to lower the amount of bps we required to enter a trade. Essentially saying that the later you enter a trade the safer it is, but the smaller expected profit you can make.</p>
<h1 id="how-does-the-closing-auction-work">How does the closing auction work?<a aria-hidden="true" class="anchor-heading icon-link" href="#how-does-the-closing-auction-work"></a></h1>
<p>Closing auction lasts between 8 and 10 minutes and has 4 periods. The first one is the reference period which takes place during the first minute of the auction. It determines the reference price, (+-5%) around which auction orders can be fulfilled.   This period is used to avoid people trying to manipulate the auction.
The second period is order input period during which all market participants submit their orders.
The third period is No-cancellation period between the 6th and 8th minute during which all submited orders cannot be amended or cancelled.
Finally the last two minutes are for the random closing period when the auction finishes.
HSI ~ 25000, spreads 1 or 2.
Buy futures = aggree to buy the underlying from now at a prespecified price. Loose on dividends, as do not own the stock. Win on interest as no need to pay now.<br>
macro analysis: find who are the big players in the auctions: like asset managers, big banks etc. I realised that these big blayer usually submit their orders as early as possible in the auction just to match the closing printing price
Other players on the market the market makers , they tend to submit later in the auction to get more information .
Our goal was to use the infromation during the auction to trade the futures because we could not trade stock during the auction but could trade the futures.
computed daily efp- basis  diff between futures and index.
forward looking bias
who are the other players? Do they have opinion on what you trade?</p></div></div><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-0 ant-col-md-6"><div><div class=""><div class="ant-anchor-wrapper dendron-toc" style="max-height:calc(100vh - 64px);z-index:1"><div class="ant-anchor"><div class="ant-anchor-ink"><span class="ant-anchor-ink-ball"></span></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#how-does-the-closing-auction-work" title="How does the closing auction work?">How does the closing auction work?</a></div></div></div></div></div></div></div></div></div></div></div><div class="ant-divider ant-divider-horizontal" role="separator"></div><footer class="ant-layout-footer" style="padding:0 24px 24px"></footer></main></section></section></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"note":{"id":"vc9t6o8as6s6lqjsp3r286f","title":"SIG","desc":"","updated":1666686601403,"created":1658834945792,"custom":{},"fname":"work.SIG","type":"note","vault":{"fsPath":"vault"},"contentHash":"994644eaddccd986d4a60f573482698e","links":[],"anchors":{"how-does-the-closing-auction-work":{"type":"header","text":"How does the closing auction work?","value":"how-does-the-closing-auction-work","line":21,"column":0,"depth":1}},"children":[],"parent":"2av385tcj2cbumxprsauff3","data":{}},"body":"\u003ch1 id=\"sig\"\u003eSIG\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#sig\"\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003cp\u003eI had to determine whether there is an opportunity for a profitable trading strategy for the HSI futures during the closing auction in HKSE. This project was divided in two main parts. First one collecting and clean data form Bloomberg Terminal – stock indication data from the closing auction. Organise it using VBA macros and then transform to pandas ­dataframes. The second stage of the project was the more interesting one which was coming with a trading ideas and backtesting models for trading during the closing auction.\u003c/p\u003e\n\u003cp\u003eThe closing auction is the last event of every trading day and allows market participants to execute at the closing price. During the closing auction we cannot trade stock but we could trade the futures. The goal of the project was to use the information of stock indications during the auction to trade the futures. First I had determine the the fair value for the futures during the closing auction. This was done by calculating the cost of carry for the basket of stocks in the index, also known as the EFP or basis. The second step was to decide what actions to take based on this value and decide when to enter and when to exit trades on the futures market. People trade features for several reasons. They might want to hedge the underlying, in case they want to lock the underlying price from now and do not be susceptivble for its future movements. Another reason is to market make and provide liquidity. Although SIG is a market maker, our reason for trading the futures in this particular project was to speculate and find if there is opportunity for profitable trading strategy.\u003c/p\u003e\n\u003cp\u003eThe approach I took when working on this project was to start with somethng very simple, think carefully about the assumptions I made and test them. In the end I tried 3 different trading strategies, each building on findings from the previous one.\nSo after computing the fair value of the futures, I had to decide what actions I should take. I could not trade at fair value because I would be just taking risk and market exposure for nothing. That is why I decided to test how many bips of edge I needed to enter a trade. I tested 3 different levels – 10bps, 20bps, 30bps.\u003c/p\u003e\n\u003cp\u003eThe simplest stategy with which I started was just to enter trade in the beginning of the auction if I saw enough edge. If the price of the future was above the fair value with 10,20,30 bps I would sell it. If the price of the future was below fair with 10,20,30 bps I would buy it. As for closing the position I would always close position in the end of the auction as I did not want to be exposed during market non-working hours. This strategy was not very good and retained 1 bps out of the 10 bps that it required to enter a trade. However, while trying this strategy I noticed that it almost always entered trades early in the auction just after the reference period between the 1st and 6th minute.  The reason for that is because during this period there is higher volatility on the stock indications and the bps I required to enter a trade were tight. I realised that in the beginning of the auction there were some market participants who just wanted to trade at the closing price of the stock but not necessarily had any opinion on the futures. For example some big asset managers just wanted to participate in the auction to get the closing price. In order to take this into account I decided that my strategy should have a warm-up period of 10 seconds after the reference period, during which it cannot enter a trade. This way I wanted to avoid the big fluctuations observed in the beginning of the auction.\u003c/p\u003e\n\u003cp\u003eSeeing that the first strategy which solely used the fair value of the futures did not work I started doubting my confidence in this fair value. That is why my second strategy was the volume strategy. I computed the historical volumes of stock indications during past auctions, and decided that I would trade the futures only once I see enough edge and the volumes were bigger than a certain threshold which was computing based on the historical volumes. This strategy did not improve the expected profits and still retained 1 bps out of 10 requested to enter a trade. However, the Sharpe ratio was improved slightly, meaning the volume strategy had lower variance while making the same amount of money.\nFinnally, as it seemed that I could not be confident in the fair value of the futures that I computed from the stock indications, I decided to change slightly the stock indications. Since there were some asset managers and ETF providers which just entered the auction to match the closing price, I decided to clip the data. Stock indications which were in the top 5% were removed because I thought they such stock indications were coming from people who did not have opinion on the futures market and I should not consider them as an input for finding signal. On historical values clipped data strategy retained 5 bps out of 10 bps. So it seemed that there could be some edge there to be made.\nAnother observations I found was that trading later in the auction would be with less risky as the coputed EFP would converge to the fair value of the futures, but in order to enter trades I had to lower the amount of bps we required to enter a trade. Essentially saying that the later you enter a trade the safer it is, but the smaller expected profit you can make.\u003c/p\u003e\n\u003ch1 id=\"how-does-the-closing-auction-work\"\u003eHow does the closing auction work?\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#how-does-the-closing-auction-work\"\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003cp\u003eClosing auction lasts between 8 and 10 minutes and has 4 periods. The first one is the reference period which takes place during the first minute of the auction. It determines the reference price, (+-5%) around which auction orders can be fulfilled.   This period is used to avoid people trying to manipulate the auction.\nThe second period is order input period during which all market participants submit their orders.\nThe third period is No-cancellation period between the 6th and 8th minute during which all submited orders cannot be amended or cancelled.\nFinally the last two minutes are for the random closing period when the auction finishes.\nHSI ~ 25000, spreads 1 or 2.\nBuy futures = aggree to buy the underlying from now at a prespecified price. Loose on dividends, as do not own the stock. Win on interest as no need to pay now.\u003cbr\u003e\nmacro analysis: find who are the big players in the auctions: like asset managers, big banks etc. I realised that these big blayer usually submit their orders as early as possible in the auction just to match the closing printing price\nOther players on the market the market makers , they tend to submit later in the auction to get more information .\nOur goal was to use the infromation during the auction to trade the futures because we could not trade stock during the auction but could trade the futures.\ncomputed daily efp- basis  diff between futures and index.\nforward looking bias\nwho are the other players? Do they have opinion on what you trade?\u003c/p\u003e","noteIndex":{"id":"wn8PE1RhG0znK1alrGFYv","title":"Root","desc":"","updated":1763992060664,"created":1631901573363,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":"vault"},"contentHash":"dc095b340c158394d643b84f8585ff0c","links":[],"anchors":{},"children":["dgcsvcwea8scgdegrk9tfni","xig93vo47ou1bkr7s4w1wb2","ro9bbyftsutm88mxw6r16p5","ypia1zmywsklpicmcgrzlz1","w7iitlako61ppm27mym400a","6bx5plramu4hksomqc1n55z","4nki3bedlvs3mnkixj3a07k","9r5ym61dkwap92fvbte1jkq","849u97nrsuyekmr4a1r92ux","2b5bwf46z6v132wu7xghvrp","dygp5h2vzw4mkromwmofynb","7h50s7ga5ziiyblmoctsqmw","pglaolxcge4xfvgoph3je89","uy9u1co5ih1fokind8tg0eq","jc23ggp8iiu92kpnzo721to","f1u2a47guuw70olv36bzf66","c1bs7wsjfbhb0zipaywqv1","2av385tcj2cbumxprsauff3","lw1b4r6ykimvj9208nkgzps"],"parent":null,"data":{},"body":"\nZdr bebce kp ;)\n\nThis is my knowledge base, additionally I keep [daily journal](https://docs.google.com/document/d/1m8Npu0-t8RweyKiHCjLL1PPDYzbebqm3OZDHH8IVsb8/edit?tab=t.rj0kvkrm7zpr)."},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":false,"leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2,"vaultSelectionModeOnCreate":"smart"}},"insertNote":{"initialValue":"templates"},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"randomNote":{},"copyNoteLink":{"aliasMode":"title"},"templateHierarchy":"template"},"workspace":{"vaults":[{"fsPath":"vault"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":true,"maxPreviewsCached":10,"maxNoteLength":204800,"task":{"name":"","dateFormat":"","addBehavior":"childOfCurrent","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link","taskCompleteStatus":["done","x"]},"enableUserTags":true,"enableHashTags":true,"dendronVersion":"0.95.0","enableEditorDecorations":true,"enableFullHierarchyNoteTitle":false,"templateHierarchy":"template"},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false,"enableFrontmatterTags":true,"enableHashesForFMTags":false},"publishing":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"copyAssets":true,"siteHierarchies":["root"],"writeStubs":false,"siteRootDir":"docs","seo":{"title":"Dendron","description":"Personal knowledge space"},"github":{"enableEditLink":true,"editLinkText":"Edit this page on GitHub","editBranch":"main","editViewMode":"tree"},"enableSiteLastModified":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"enableTaskNotes":true,"enablePrettyLinks":true,"searchMode":"lookup","assetsPrefix":"/dendron-wiki","siteUrl":"https://ngocuong0105.github.io","duplicateNoteBehavior":{"action":"useVault","payload":["vault"]},"theme":"light","templateVersion":"0.97.0","ga":{"tracking":"G-W5DRRLQ1N7"},"siteFaviconPath":"favicon.ico","siteIndex":"root"}}},"__N_SSG":true},"page":"/notes/[id]","query":{"id":"vc9t6o8as6s6lqjsp3r286f"},"buildId":"AZXonBxzXDJ7mmxS9Br0O","assetPrefix":"/dendron-wiki","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>